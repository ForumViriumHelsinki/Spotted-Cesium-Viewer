<!DOCTYPE html>
<html lang="en">
<head>
<title>Helsinki Green Areas</title>
  <meta charset="utf-8">
  <!-- Include the CesiumJS JavaScript and CSS files -->
  <script src="lib/Cesium/Cesium.js"></script>
  <script type="text/javascript" src="services/geoapitools.js"></script>
  <script type="text/javascript" src="services/vegetation.js"></script>
  <script type="text/javascript" src="services/othernature.js"></script>
  <script type="text/javascript" src="services/sliderevents.js"></script>
  <script type="text/javascript" src="services/featurepicker.js"></script>
  <script type="text/javascript" src="services/trees.js"></script>
  <script type="text/javascript" src="services/water.js"></script>
  <script type="text/javascript" src="services/fields.js"></script>
  <script type="text/javascript" src="services/plots.js"></script>
  <script type="text/javascript" src="services/decoding.js"></script>
  <script type="text/javascript" src="services/selectevents.js"></script>
  <script type="text/javascript" src="services/built.js"></script>
  <script src="lib/localforage/dist/localforage.js"></script>
  <script src="lib/plotly-2.12.1.min.js"></script>
  <link href="lib/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link href="styles/demoapp.css" rel="stylesheet">
</head>
<body>
<div id="canvasScalerDiv">
  <div id="cesiumContainer"></div>
  <div id="UIContainer">
  <p class="header">Spotted Viewer</p>
  <p class="uiButton" onClick="reset()" style="color: red; float:right;">Reset</p>

  <!-- Selects WMS layer -->
<select id="layerSelector">
  <option value="avoindata:Opaskartta_Helsinki">Opaskartta</option>
  <option value="avoindata:Ortoilmakuva">Ortoilmakuva</option>
  <option value="avoindata:Kantakartta">Kantakartta</option>
  <option value="avoindata:Kiinteistokartta">Kiinteistokartta</option>
  <option value="avoindata:Karttasarja_PKS">Karttasarja PKS</option>
  <option value="avoindata:Vaaravariortoilmakuva_2022_5cm">V채채r채v채riortoilmakuva</option>
  <option value="avoindata:Ajantasa_asemakaava">Asemakaava</option>
  <option value="avoindata:Kaavahakemisto">Kaavahakemisto</option>
  <option value="avoindata:Rakennukset_alue_rekisteritiedot">Rakennukset alue rekisteritiedot</option>
  <option value="avoindata:Tavoitteellinen_viher_ja_virkistysverkosto_VISTRA">Tavoitteellinen viher- ja virkistysverkosto</option>
</select>

  <!-- showPlotSwitch-->
<label class="switch">
  <input type="checkbox" id="showPlotToggle" value="showPlot" checked>
  <span class="slider round"></span>
</label>
<label for="showPlotToggle" class="label">Display plot</label>

  <!-- showPrintSwitch-->
<label class="switch">
  <input type="checkbox" id="printToggle" value="print" checked>
  <span class="slider round"></span>
</label>
<label for="printToggle" class="label">Object details</label>

  <!-- showVegetationSwitch-->
<label class="switch">
	<input type="checkbox" id="showVegetationToggle" value="showVegetation" >
	<span class="slider round"></span>
</label>
<label for="showVegetationToggle" class="label">Vegetation</label>

  <!-- showWaterSwitch-->
<label class="switch">
  <input type="checkbox" id="showWaterToggle" value="showWater" >
  <span class="slider round"></span>
</label>
<label for="showWaterToggle" class="label">Fresh water</label>
  
  <!--  showFields-->
<label class="switch" id = "showFieldsSwitch" >
  <input type="checkbox" id="showFieldsToggle" value="showFields" >
  <span class="slider round"></span>
</label>
<label for="showFields" class="label">Fields</label>

  <!--  showOtherNature-->
<label class="switch" id = "showOtherNatureSwitch" >
  <input type="checkbox" id="showOtherNatureToggle" value="showOtherNature" >
  <span class="slider round"></span>
  </label>
<label for="showOtherNature" class="label">Rocks, Dirt, Unused Land</label>

  <!--  showBuilt-->
<label class="switch" id = "showBuiltSwitch" >
  <input type="checkbox" id="showBuiltToggle" value="showBuilt" >
  <span class="slider round"></span>
  </label>
<label for="showBuilt" class="label">Buildings and roads</label>

</div>

	<div id="printContainer">
  <i>Please click on a major district area to load nature polygons from the WFS server...</i>
  	</div>

  <div id="plotContainer">
  </div>
  <div id="plotBuiltContainer">
  </div>
  		<!-- Add Logo -->
		
	<div class="logoHolder">	
	<img src="assets/images/spotted_logo.png" id="logoSpotted" alt="Spotted" />
	<img src="assets/images/fvh-1_musta.png" id="logoFVH" alt="Forum Virium Helsinki" />
  </div>
  
  </div>
  <script>
  
  	// UI related global variables...
  	var showPlot = true;
	  var showVegetation = false;
    var showWater = false;
  	var print = true; //show object details..
	  var postalcode = null;
    var nameOfZone = null;
    var averageHeatExposure = 0;
    var majorDistrict = null;
    var districtName = null;
	// OS version, operating without Cesium Ion services...
    Cesium.Ion.defaultAccessToken = null;
    document.getElementById("showVegetationToggle").disabled = true;
    document.getElementById("showWaterToggle").disabled = true;
    document.getElementById("showFieldsToggle").disabled = true;
    document.getElementById("showOtherNatureToggle").disabled = true;
    document.getElementById("showBuiltToggle").disabled = true;

    addLayerSelectorEventListener( );

    // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
    const viewer = new Cesium.Viewer('cesiumContainer', {
    	terrainProvider : new Cesium.EllipsoidTerrainProvider(),
    	imageryProvider: createImageryProvider( document.getElementById( 'layerSelector' ).value ),
    	animation: false,
      fullscreenButton: false,
      geocoder: false,
      shadows: false,
      navigationHelpButton: false,
      timeline: false,
      sceneModePicker: false,
      baseLayerPicker: false,
      infoBox: false,
	  homeButton: false
    });  
    
    // Fly the camera to Helsinki at the given longitude, latitude, and height.
    viewer.camera.flyTo({
      destination : Cesium.Cartesian3.fromDegrees(24.941745, 60.165464, 35000), 
      orientation : {
        heading : Cesium.Math.toRadians(0.0),
        pitch : Cesium.Math.toRadians(-85.0),
      }
    });
    
    // Load post code zones & energy data availability tags
	loadPostCodeZones(0.2);
    
	//Experimental scripts for playing around with the objects, and retrieving their information...
	document.getElementById("cesiumContainer").addEventListener("click", function() { processClick( viewer, event ) });
	//Attaching UI events...
	addEventListener('input', ( event ) => { sliderEvents( event ) } );

  //disable switch for showing heat exposure on nature areas

  const hriCredit = new Cesium.Credit('<a href="https://hri.fi/data/fi/dataset" target="_blank"><img src="assets/images/hero_logo_50x25.png" title="assets/images/Helsinki Region Infoshare"/></a>');
  const hsyCredit = new Cesium.Credit('<a href="https://www.hsy.fi/en/air-quality-and-climate/geographic-information/open-geographic-information-interfaces/" target="_blank"><img src="assets/images/hsy-logo_41x25px.png" title="HSY"/></a>');

  viewer.scene.frameState.creditDisplay.addDefaultCredit( hriCredit );
  viewer.scene.frameState.creditDisplay.addDefaultCredit( hsyCredit );

  </script>
</body>
</html>